
pipeline {
    agent any

    stages {
        stage('Clone Repository') {
            steps {
                // Clone the GitHub repository containing the Ansible playbook
                git url: 'https://github.com/Maram-Hassan/ansible-lab.git', 
                    branch: 'main', 
                    credentialsId: 'dd22c8fd-509b-467e-a5ee-10e58593b2c9' 
                    // Adjust to your GitHub credentials ID
            }
        }
          stage('Install Nexus') {
            steps {
            
                    sh """
                    # Run the Ansible playbook using the private key and inventory
                       ansible-playbook play-book.yml -i inventory.txt --private-key ansible-ec2-key.pem --ssh-extra-args '-o StrictHostKeyChecking=no'

                    """
                
            }
        }

        
    }
}

           