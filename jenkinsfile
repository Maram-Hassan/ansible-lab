
pipeline {
    agent any

    stages {
        stage('Clone Repository') {
            steps {
                // Clone the GitHub repository containing the Ansible playbook
                git url: 'https://github.com/Maram-Hassan/ansible-lab.git', 
                    branch: 'main', 
            }
        }
          stage('Install Nexus') {
            steps {
            
                    sh """
                    # Run the Ansible playbook using the private key and inventory
                       withCredentials([file(credentialsId: 'ssh-ansible', variable: 'ssh-ansible')]) {
                       ansible-playbook play-book.yml -i inventory.txt --private-key ${ssh-ansible} --ssh-extra-args '-o StrictHostKeyChecking=no'

                    """
                
            }
        }

        
    }
}

           